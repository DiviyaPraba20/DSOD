<div class="page-content">
  <div class="container" *ngIf="pageContent && pageContent.id">
    <div class="row">
      <div class="col-lg-9 article-content-wrap pr-3 pr-lg-4">
        <div class="article-content">
          <dsod-article-media [content]="pageContent" [rating]="!avgRating ? pageContent?.avgCommentRating : avgRating"
            [isLoggedIn]="isLoggedIn"></dsod-article-media>
          <dsod-article-content [content]="pageContent?.content"></dsod-article-content>
          <dsod-gallery *ngIf="pageContent.photos.length" [photos]="pageContent?.photos"></dsod-gallery>
          <dsod-references *ngIf="pageContent.references.length" [references]="pageContent?.references"></dsod-references>
          <div class="row essay-container" *ngIf="pageContent?.visualEssays.length">
            <div class="col-12">
              <h3 class="essay-title">Visual Essay</h3>
            </div>
            <div class="col-lg-12" *ngFor="let essay of pageContent?.visualEssays">
              <a class="essay-item" [routerLink]="['/visual-essay', essay.id]">{{essay.title}}</a>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-3 trending-videos-wrap">
        <section class="trending-videos" *ngIf="(trendingTopics$ | async)?.length">
          <h2 class="section-title">Trending Topics</h2>
          <div class="row">
            <div class="col-lg-12 col-md-7">
              <div *ngFor="let topic of trendingTopics$ | async">
                <dsod-topic [topic]="topic" [contentLength]=117 [showImage]="true" [showHeader]="true" styleFor="content-sm"
                  [showRating]=true></dsod-topic>
              </div>
            </div>
            <div class="col-lg-12 col-md-5">
              <dsod-sponsored-ad></dsod-sponsored-ad>
            </div>
          </div>
        </section>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-9">
        <div class="related-content" *ngIf="pageContent?.relativeTopicList.length">
          <h2 class="section-title">Related Content</h2>
          <div class="row">
            <div class="col-4" *ngFor="let topic of pageContent?.relativeTopicList">
              <dsod-related-content [content]="topic" [contentTypeName]="pageContent?.contentTypeName"></dsod-related-content>
            </div>
          </div>
        </div>
        <div *ngIf="isLoggedIn">
          <dsod-article-reviews [content]="pageContent" (updateRating)="updateRating($event)"></dsod-article-reviews>
        </div>
      </div>
    </div>
  </div>
</div>
